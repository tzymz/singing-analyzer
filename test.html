<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>å”±æ­Œåˆ†ææµ‹è¯•</title>
</head>
<body>
    <h1>ğŸµ AIå”±æ­Œåˆ†ææµ‹è¯•</h1>
    <div>
        <input type="file" id="audioFile" accept="audio/*">
        <select id="userLevel">
            <option value="beginner">åˆå­¦è€…</option>
            <option value="intermediate">è¿›é˜¶</option>
            <option value="advanced">ä¸“ä¸š</option>
        </select>
        <button onclick="analyze()">å¼€å§‹åˆ†æ</button>
    </div>
    <div id="result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>
    <script>
        async function analyze() {
            const fileInput = document.getElementById("audioFile");
            const userLevel = document.getElementById("userLevel").value;
            const resultDiv = document.getElementById("result");
            if (!fileInput.files[0]) {
                alert("è¯·é€‰æ‹©éŸ³é¢‘æ–‡ä»¶");
                return;
            }
            const formData = new FormData();
            formData.append("audio_file", fileInput.files[0]);
            formData.append("user_level", userLevel);
            try {
                resultDiv.innerHTML = "åˆ†æä¸­...";
                const response = await fetch("http://localhost:8000/api/v1/analyze", {
                    method: "POST",
                    body: formData
                });
                const result = await response.json();
                if (result.success) {
                    resultDiv.innerHTML = `<h3>ğŸ‰ åˆ†æå®Œæˆï¼</h3>
                        <p><strong>æ€»ä½“è¯„åˆ†:</strong> ${result.data.overall_score.toFixed(1)}åˆ†</p>
                        <h4>æŠ€æœ¯åˆ†æ:</h4>
                        <ul>
                            <li>ğŸµ éŸ³å‡†: ${result.data.technical_scores.pitch_accuracy.toFixed(1)}åˆ†</li>
                            <li>ğŸ¥ èŠ‚å¥: ${result.data.technical_scores.rhythm_accuracy.toFixed(1)}åˆ†</li>
                        </ul>
                        <h4>æ”¹è¿›å»ºè®®:</h4>
                        <ul>${result.data.personalized_feedback.map(item => `<li>${item}</li>`).join("")}</ul>`;
                } else {
                    resultDiv.innerHTML = `åˆ†æå¤±è´¥: ${result.message}`;
                }
            } catch (error) {
                resultDiv.innerHTML = `è¯·æ±‚å¤±è´¥: ${error}`;
            }
        }
    </script>
</body>
</html>
